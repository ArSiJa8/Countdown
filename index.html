<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Satisfying Countdown â€“ Target Morph</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root { --bg:#05070c; --accent:#00ffd5; }
    * { box-sizing:border-box; font-family:system-ui,sans-serif; }
    body {
      margin:0; height:100vh; overflow:hidden;
      background:radial-gradient(circle at center,#0a1220,var(--bg));
      color:white; display:flex; justify-content:center; align-items:center;
    }
    .ui { position:absolute; top:20px; text-align:center; z-index:10; }
    input,button{
      font-size:1rem; padding:.5rem .8rem; border-radius:10px; border:none;
      background:rgba(255,255,255,.12); color:white; backdrop-filter:blur(8px);
    }
    button{cursor:pointer;margin-left:.4rem}
    .time{margin-top:.6rem;font-size:1.6rem;letter-spacing:.15em;opacity:.7}
    canvas{position:fixed;inset:0}
  </style>
</head>
<body>

<div class="ui">
  <input type="time" id="t">
  <button onclick="start()">Start</button>
  <div class="time" id="out">--:--:--</div>
</div>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let w,h; function resize(){w=canvas.width=innerWidth;h=canvas.height=innerHeight}
addEventListener('resize',resize); resize();

let startMs=null, endMs=null, duration=1;

function start(){
  const v=document.getElementById('t').value; if(!v) return;
  const [hh,mm]=v.split(':').map(Number);
  const now=new Date(); const target=new Date();
  target.setHours(hh,mm,0,0); if(target<now) target.setDate(target.getDate()+1);
  startMs=Date.now(); endMs=target.getTime(); duration=endMs-startMs;
}

const ease=t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2;

function drawShape(morph,time,alpha){
  ctx.beginPath();
  const maxR=Math.min(w,h)*.38;
  for(let a=0;a<=Math.PI*2+.01;a+=.02){
    const base=1;
    const chaos=Math.sin(a*4+time*.001)*Math.cos(a*3-time*.0007);
    const r=maxR*(.35+.65*morph)*(base+chaos*.25*(1-morph));
    const x=Math.cos(a)*r;
    const y=Math.sin(a)*r;
    ctx.lineTo(x,y);
  }
  ctx.strokeStyle=`rgba(0,255,213,${alpha})`;
  ctx.lineWidth=1.4;
  ctx.stroke();
}

function loop(t){
  ctx.clearRect(0,0,w,h);
  ctx.translate(w/2,h/2);

  let p=0;
  if(startMs&&endMs){ p=(Date.now()-startMs)/duration; p=Math.min(1,Math.max(0,p)); }
  const e=ease(p);

  // Zielzustand (immer sichtbar)
  drawShape(1,t,0.12);

  // Aktuelle Morph-Animation
  for(let i=0;i<5;i++){
    drawShape(e,t+i*200,0.15+i*0.1);
  }

  ctx.setTransform(1,0,0,1,0,0);

  if(endMs){
    const diff=Math.max(0,endMs-Date.now());
    const s=Math.floor(diff/1000)%60;
    const m=Math.floor(diff/60000)%60;
    const h2=Math.floor(diff/3600000);
    out.textContent=`${String(h2).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);
</script>
</body>
</html>
